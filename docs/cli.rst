CLI-утилита
===========

После установки данного пакета становится доступна CLI-утилита
с одноименным с пакетом названием. Данная утилита предоставляет
простейший интерфейс для доступа к атрибутам героя.

Описание флагов и аргументов данной утилиты доступно при
вызове утилиты с флагом `--help`.

Пример использования
--------------------

Самый простой пример использования выглядит следующим образом

.. code-block:: bash

   $ gvapi --god "Some god" name
   Some Hero

В данном примере `name` - это имя атрибута класса `Hero`.

Конфигурация
------------

Утилита позволяет задавать конфигурацию по умолчанию за счет
переменных окружения.

Для установки имени божества по умолчанию
необходимо передать переменную окружения `GVAPI_GOD`.

Установить токен по умолчанию можно через переменную окружения `GVAPI_TOKEN`.

Данные переменные окружения могут быть заданы в конфигурационном
файле используемой оболочки. Для BASH это будет `~/.bashrc`, а для
ZSH - `~/.zshrc`. Пример установки переменных окружения в конфигурационном
файле оболочки BASH представлен ниже:

.. code-block:: bash

   export GVAPI_GOD="Some god"
   export GVAPI_TOKEN="awdoja"

Особенности
-----------

Данная утилита при каждом своем вызове кэширует состояние объекта героя
для предотвращения чрезмерного количества обращений к API. Согласно
документации API Годвилля, фактически данные обновляются не чаще, чем
раз в минуту, поэтому не имеет смысла обращаться к API чаще чем раз в минуту.
Так же в документации можно найти предупреждение, что при слишком частом
обращении к API можно получить бан.

Если кэш по какой-либо причине был поврежден, это может привести к
непредвиденному поведению утилиты. Для сброса кэша достаточно вызвать
утилиту с соответствующим флагом `--drop-cache`.
